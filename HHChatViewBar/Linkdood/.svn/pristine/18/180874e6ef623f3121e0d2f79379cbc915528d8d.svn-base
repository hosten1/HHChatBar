//
//  LDRobotModelTest.m
//  Linkdood
//
//  Created by VRV2 on 16/6/8.
//  Copyright © 2016年 xiong qing. All rights reserved.
//

#import <XCTest/XCTest.h>

#import <SDKClient/SDKClient.h>
#import "LDTextTool.h"
//设置机器人ID
#define kRobotID 4328621727

@interface LDRobotModelTest : XCTestCase
@property(nonatomic,strong)LDClient *client;
@property(nonatomic,strong)LDTextTool *utiles;
@property(nonatomic,strong)LDRobotListModel *robotList;
@end

@implementation LDRobotModelTest

- (void)setUp {
    [super setUp];
    LDClient *client =  [LDClient sharedInstance];
    _client = client;
    _utiles = [[LDTextTool alloc]init];
    self.robotList = [_client robotListModel];
}

-(void)testGetAllRobotToRobotlist{
    self.robotList = [_client robotListModel];
    XCTAssertNotEqual(self.robotList.numberOfItems, 0,@"机器人获取失败");
}

//取消关注机器人
-(void)testRemoveRobot{
    __block BOOL done = NO;

    LDRobotModel *robotModel =(LDRobotModel*) [self.robotList itemAtIndex:0];
    [self.robotList removeRobot:robotModel completion:^(NSError *error) {
        XCTAssertTrue(!error,@"取消关注机器人失败");
        done = !error;
  
    }];
//    _ID	int64_t	4328621727
    XCTAssertTrue([self.utiles waitFor:&done timeout:3],
                  @"Timed out waiting for response asynch method completion");
}

//关注机器人
-(void)testAddRobot{
    __block BOOL done = NO;
    
    LDRobotModel *robotModel =[[LDRobotModel alloc]initWithID:kRobotID];
//    [robotModel queryRobotInfo];
    [self.robotList addRobot:robotModel  completion:^(NSError *error) {
        XCTAssertTrue(!error,@"关注机器人失败");
        done = !error;
        
    }];
    //    _ID	int64_t	4328621727
    XCTAssertTrue([self.utiles waitFor:&done timeout:3],
                  @"Timed out waiting for response asynch method completion");
}
- (void)testPerformanceExample {
    // This is an example of a performance test case.
    [self measureBlock:^{
        // Put the code you want to measure the time of here.
    }];
}

@end
